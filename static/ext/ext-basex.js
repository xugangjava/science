/*!
 * ext-basex/$JIT Adapter Extensions for ExtJS Library 2.0+ and Ext Core 3.0+
 * Copyright(c) 2008-2009 Active Group, Inc.
 * licensing@theactivegroup.com
 * http://licensing.theactivegroup.com
 */
/*
 * ext-basex/$JIT Adapter Extensions for ExtJS Library 2.0+ and Ext Core 3.0+
 * Copyright(c) 2008-2009 Active Group, Inc.
 * licensing@theactivegroup.com
 * http://licensing.theactivegroup.com
 */
(function(){var d=Ext.lib.Ajax,h=function(m){return typeof m!="undefined"},i=Ext.emptyFn||function(){},a=Object.prototype,j=function(o,n,m){var m=Ext.isArray(m)?m:Array.slice(arguments,2);try{return o.apply(n||o,m)}catch(p){}};Ext.lib.Ajax.Queue=function(m){m=m?(m.name?m:{name:m}):{};Ext.apply(this,m,{name:"q-default",priority:5,FIFO:true,callback:null,scope:null,suspended:false,progressive:false});this.requests=new Array();this.pending=false;this.priority=this.priority>9?9:(this.priority<0?0:this.priority)};Ext.extend(Ext.lib.Ajax.Queue,Object,{add:function(m){var n=d.events?d.fireEvent("beforequeue",this,m):true;if(n!==false){this.requests.push(m);this.pending=true;d.pendingRequests++;this.manager&&this.manager.start()}},suspended:false,activeRequest:null,next:function(m){var n=m?this.requests[this.FIFO?"first":"last"]():this.requests[this.FIFO?"shift":"pop"]();if(this.requests.length==0){this.pending=false;Ext.isFunction(this.callback)&&this.callback.call(this.scope||null,this);d.events&&d.fireEvent("queueempty",this)}return n||null},clear:function(){this.suspend();d.pendingRequests-=this.requests.length;this.requests.length=0;this.pending=false;this.resume();this.next()},suspend:function(){this.suspended=true},resume:function(){this.suspended=false},requestNext:function(m){var n;this.activeRequest=null;if(!this.suspended&&(n=this.next(m))){if(n.active){this.activeRequest=d.request.apply(d,n);d.pendingRequests--}else{return this.requestNext(m)}}return this.activeRequest}});Ext.lib.Ajax.QueueManager=function(m){Ext.apply(this,m||{},{quantas:10,priorityQueues:new Array(new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array()),queues:{}})};Ext.extend(Ext.lib.Ajax.QueueManager,Object,{quantas:10,getQueue:function(m){return this.queues[m]},createQueue:function(m){if(!m){return null}var n=new d.Queue(m);n.manager=this;this.queues[n.name]=n;var o=this.priorityQueues[n.priority];o&&o.indexOf(n.name)==-1&&o.push(n.name);return n},removeQueue:function(m){if(m&&(m=this.getQueue(m.name||m))){m.clear();this.priorityQueues[m.priority].remove(m.name);delete this.queues[m.name]}},start:function(){if(!this.started){this.started=true;this.dispatch()}return this},suspendAll:function(){forEach(this.queues,function(m){m.suspend()})},resumeAll:function(){forEach(this.queues,function(m){m.resume()});this.start()},progressive:false,stop:function(){this.started=false;return this},dispatch:function(){var p=this,o=p.queues,m=(d.activeRequests>=d.maxConcurrentRequests);while(d.pendingRequests&&!m){var n=function(t){var s=o[t],r;while(s&&!s.suspended&&s.pending&&s.requestNext()){m||(m=d.activeRequests>=d.maxConcurrentRequests);if(m){break}if(s.progressive||p.progressive){break}}if(m){return false}};forEach(this.priorityQueues,function(q){!!q.length&&forEach(q,n,this);m||(m=d.activeRequests>=d.maxConcurrentRequests);if(m){return false}},this)}if(d.pendingRequests||m){this.dispatch.defer(this.quantas,this)}else{this.stop()}}});Ext.apply(d,{headers:d.headers||{},defaultPostHeader:d.defaultPostHeader||"application/x-www-form-urlencoded; charset=UTF-8",defaultHeaders:d.defaultHeaders||{},useDefaultXhrHeader:!!d.useDefaultXhrHeader,defaultXhrHeader:"Ext.basex",conn:d.conn||{},SCRIPTTAG_POOL:[],_domRefs:[],onUnload:function(){delete d._domRefs;delete d.SCRIPTTAG_POOL},monitoredNode:function(z,r,x,m,y){var o=null,v=(m||window).document,u=v?v.getElementsByTagName("head")[0]:null,q=String(z).toUpperCase()=="SCRIPT";if(z&&v&&u){o=q&&!!d.SCRIPTTAG_POOL.length?Ext.get(d.SCRIPTTAG_POOL.pop()):null;if(o){o.removeAllListeners()}else{o=Ext.get(v.createElement(z))}var t=Ext.getDom(o),p=Ext.capabilities.isEventSupported;t&&forEach(r||{},function(B,A){B&&(A in t)&&t.setAttribute(A,B)});var s=Ext.isFunction(x)?{success:x}:x||{},w=Ext.isFunction(s.success)?s.success.createDelegate(s.scope||s.success,[s],0):null,n=Ext.isFunction(s.failure)?s.failure.createDelegate(s.scope||s.failure,[s],0):null;if(w&&!s.immediate){if(p("load",z)){o.on("load",w)}else{if(p("readystatechange",z)){o.on("readystatechange",function(){this.dom.readyState=="loaded"&&w()})}}}if(Ext.isFunction(n)&&p("error",z)){o.on("error",n)}if(!y){t.parentNode||u.appendChild(t);s.immediate&&w()}}d._domRefs.push(o);return o},poll:{},pollInterval:d.pollInterval||50,queueManager:new d.QueueManager(),queueAll:false,activeRequests:0,pendingRequests:0,maxConcurrentRequests:(function(){var m=6;if(Ext.isIE){m=Ext.value(window.maxConnectionsPerServer,2)}else{if(Ext.isOpera){m=4}else{if(Ext.Safari){m=Ext.isSafari4?5:4}}}return m})(),forceActiveX:false,async:true,createXhrObject:function(t,u){var q={status:{isError:false},tId:t},p=null;u||(u={});try{u.xdomain&&window.XDomainRequest&&(q.conn=new XDomainRequest());if(!h(q.conn)&&Ext.capabilities.hasActiveX&&!!Ext.value(u.forceActiveX,this.forceActiveX)){throw ("IE7forceActiveX")}q.conn||(q.conn=new XMLHttpRequest())}catch(n){var m=Ext.capabilities.hasActiveX?(u.multiPart?this.activeXMultipart:this.activeX):null;if(m){for(var r=0,o=m.length;r<o;++r){try{q.conn=new ActiveXObject(m[r]);break}catch(s){p=(n=="IE7forceActiveX"?s:n)}}}}finally{q.status.isError=!h(q.conn);q.status.error=p}return q},createExceptionObject:function(q,p,n,m,o){return{tId:q,status:n?-1:0,statusText:n?"transaction aborted":"communication failure",isAbort:n,isTimeout:m,argument:p}},encoder:encodeURIComponent,serializeForm:function(){var p=/select-(one|multiple)/i,m=/file|undefined|reset|button/i,n=/radio|checkbox/i,o=/submit/i;return function(r){var s=r.elements||(document.forms[r]||Ext.getDom(r)).elements,y=false,x=this.encoder,v,A,q,t,u="",w,z;forEach(s,function(B){q=B.name;w=B.type;if(!B.disabled&&q){if(p.test(w)){forEach(B.options,function(C){if(C.selected){z=C.hasAttribute?C.hasAttribute("value"):C.getAttributeNode("value").specified;u+=String.format("{0}={1}&",x(q),x(z?C.value:C.text))}})}else{if(!m.test(w)){if(!(n.test(w)&&!B.checked)&&!(w=="submit"&&y)){u+=x(q)+"="+x(B.value)+"&";y=o.test(w)}}}}});return u.substr(0,u.length-1)}}(),getHttpStatus:function(o,n,m){var q={status:0,statusText:"",isError:false,isLocal:false,isOK:true,error:null,isAbort:!!n,isTimeout:!!m};try{if(!o||!("status" in o)){throw ("noobj")}q.status=o.status;q.readyState=o.readyState;q.isLocal=(!o.status&&location.protocol=="file:")||(Ext.isSafari&&!h(o.status));q.isOK=(q.isLocal||(q.status==304||q.status==1223||(q.status>199&&q.status<300)));q.statusText=o.statusText||""}catch(p){}return q},handleTransactionResponse:function(r,s,p,n){s=s||{};var q=null;if(!r.status.isError){r.status=this.getHttpStatus(r.conn,p,n);q=this.createResponseObject(r,s.argument,p,n)}r.isPart||this.releaseObject(r);r.status.isError&&(q=Ext.apply({},q||{},this.createExceptionObject(r.tId,s.argument,!!p,!!n,r.status.error)));q.options=r.options;q.fullStatus=r.status;if(!this.events||this.fireEvent("status:"+r.status.status,r.status.status,r,q,s,p)!==false){if(r.status.isOK&&!r.status.isError){if(!this.events||this.fireEvent("response",r,q,s,p,n)!==false){var m=r.isPart?"onpart":"success";Ext.isFunction(s[m])&&s[m].call(s.scope||null,q)}}else{if(!this.events||this.fireEvent("exception",r,q,s,p,n,q.fullStatus.error)!==false){Ext.isFunction(s.failure)&&s.failure.call(s.scope||null,q,q.fullStatus.error)}}}return q},releaseObject:function(m){m&&(m.conn=null);if(m&&Ext.value(m.tId,-1)+1){this.activeRequests--;if(this.poll[m.tId]){window.clearInterval(this.poll[m.tId]);delete this.poll[m.tId]}if(this.timeout[m.tId]){window.clearInterval(this.timeout[m.tId]);delete this.timeout[m.tId]}delete this.conn[m.tId]}},decodeJSON:Ext.decode,reCtypeJSON:/(application|text)\/json/i,reCtypeXML:/(application|text)\/xml/i,createResponseObject:function(z,B,q,r){var D="content-type",t={responseXML:null,responseText:"",responseStream:null,responseJSON:null,contentType:null,getResponseHeader:i,getAllResponseHeaders:i};var n={},p="";if(q!==true){try{t.responseJSON=z.conn.responseJSON||null;t.responseStream=z.conn.responseStream||null;t.contentType=z.conn.contentType||null;t.responseText=z.conn.responseText}catch(E){z.status.isError=true;z.status.error=E}try{t.responseXML=z.conn.responseXML||null}catch(C){}try{p=("getAllResponseHeaders" in z.conn?z.conn.getAllResponseHeaders():null)||"";var v;p.split("\n").forEach(function(o){(v=o.split(":"))&&v.first()&&(n[v.first().trim().toLowerCase()]=(v.last()||"").trim())})}catch(A){z.status.isError=true;z.status.error=A}finally{t.contentType=t.contentType||n[D]||""}if((z.status.isLocal||z.proxied)&&typeof t.responseText=="string"){z.status.isOK=!z.status.isError&&((z.status.status=(!!t.responseText.length)?200:404)==200);if(z.status.isOK&&((!t.responseXML&&(z.options.isXML||this.reCtypeXML.test(t.contentType)))||(t.responseXML&&t.responseXML.childNodes.length===0))){var F=null;try{if(Ext.capabilities.hasActiveX){F=new ActiveXObject("MSXML2.DOMDocument.3.0");F.async=false;F.loadXML(t.responseText)}else{var w=null;try{w=new DOMParser();F=w.parseFromString(t.responseText,"application/xml")}catch(m){}finally{w=null}}}catch(y){z.status.isError=true;z.status.error=y}t.responseXML=F}if(t.responseXML){var x=(t.responseXML.documentElement&&t.responseXML.documentElement.nodeName=="parsererror")||(t.responseXML.parseError||0)!==0||t.responseXML.childNodes.length===0;x||(t.contentType=n[D]=t.responseXML.contentType||"text/xml")}}if(z.options.isJSON||(this.reCtypeJSON&&this.reCtypeJSON.test(n[D]||""))){try{Ext.isObject(t.responseJSON)||Ext.isArray(t.responseJSON)||(t.responseJSON=Ext.isFunction(this.decodeJSON)&&Ext.isString(t.responseText)?this.decodeJSON(t.responseText):null)}catch(u){z.status.isError=true;z.status.error=u}}}z.status.proxied=!!z.proxied;Ext.apply(t,{tId:z.tId,status:z.status.status,statusText:z.status.statusText,contentType:t.contentType||n[D],getResponseHeader:function(o){return n[(o||"").trim().toLowerCase()]},getAllResponseHeaders:function(){return p},fullStatus:z.status,isPart:z.isPart||false});z.parts&&!z.isPart&&(t.parts=z.parts);h(B)&&(t.argument=B);return t},setDefaultPostHeader:function(m){this.defaultPostHeader=m||""},setDefaultXhrHeader:function(m){this.useDefaultXhrHeader=m||false},request:function(m,o,r,t,z){var w=z=Ext.apply({async:this.async||false,headers:false,userId:null,password:null,xmlData:null,jsonData:null,queue:null,proxied:false,multiPart:false,xdomain:false},z||{});var v;if(r.argument&&r.argument.options&&r.argument.options.request&&(v=r.argument.options.request.arg)){Ext.apply(w,{async:w.async||v.async,proxied:w.proxied||v.proxied,multiPart:w.multiPart||v.multiPart,xdomain:w.xdomain||v.xdomain,queue:w.queue||v.queue,onPart:w.onPart||v.onPart})}if(!this.events||this.fireEvent("request",m,o,r,t,w)!==false){if(!w.queued&&(w.queue||(w.queue=this.queueAll||null))){w.queue===true&&(w.queue={name:"q-default"});var u=w.queue;var p=u.name||u,y=this.queueManager;var n=y.getQueue(p)||y.createQueue(u);w.queue=n;w.queued=true;var x=[m,o,r,t,w];x.active=true;n.add(x);return{tId:this.transactionId++,queued:true,request:x,options:w}}z.onpart&&(r.onpart||(r.onpart=Ext.isFunction(z.onpart)?z.onpart.createDelegate(z.scope):null));w.headers&&forEach(w.headers,function(A,q){this.initHeader(q,A,false)},this);var s;if(s=(this.headers?this.headers["Content-Type"]||null:null)){delete this.headers["Content-Type"]}if(w.xmlData){s||(s="text/xml");m="POST";t=w.xmlData}else{if(w.jsonData){s||(s="application/json; charset=utf-8");m="POST";t=(Ext.isArray(w.jsonData)||Ext.isObject(w.jsonData))?Ext.encode(w.jsonData):w.jsonData}}if(t){s||(s=this.useDefaultHeader?this.defaultPostHeader:null);s&&this.initHeader("Content-Type",s,false)}return this.makeRequest(String(w.method||m).toUpperCase(),o,r,t,w)}return null},getConnectionObject:function(p,m,r){var s,q;var t=this.transactionId;m||(m={});try{if(q=m.proxied){s={tId:t,status:{isError:false},proxied:true,conn:{el:null,send:function(u){var v=(q.target||window).document,o=v.getElementsByTagName("head")[0];if(o&&this.el){o.appendChild(this.el.dom);this.readyState=2}},abort:function(){this.readyState=0;window[s.cbName]=undefined;Ext.isIE||delete window[s.cbName];var o=Ext.getDom(this.el);if(this.el){this.el.removeAllListeners();if(!s.debug){if(Ext.isIE){d.SCRIPTTAG_POOL.push(this.el)}else{this.el.remove();if(o){for(var u in o){delete o[u]}}}}}this.el=o=null},_headers:{},getAllResponseHeaders:function(){var o=[];forEach(this._headers,function(v,u){v&&o.push(u+": "+v)});return o.join("\n")},getResponseHeader:function(o){return this._headers[String(o).toLowerCase()]||""},onreadystatechange:null,onload:null,readyState:0,status:0,responseText:null,responseXML:null,responseJSON:null},debug:q.debug,params:Ext.isString(m.params)?Ext.urlDecode(m.params):m.params||{},cbName:q.callbackName||"basexCallback"+t,cbParam:q.callbackParam||null};window[s.cbName]=s.cb=function(o){this.readyState=4;o&&typeof(o)=="object"&&(this.responseJSON=o);this.responseText=o||null;this.status=!!o?200:404;Ext.isFunction(this.onreadystatechange)&&this.onreadystatechange();Ext.isFunction(this.onload)&&this.onload()}.createDelegate(s.conn);s.conn.open=function(){if(s.cbParam){s.params[s.cbParam]=s.cbName}var o=Ext.urlEncode(Ext.apply(Ext.urlDecode(r)||{},s.params,p.indexOf("?")>-1?Ext.urlDecode(p.split("?").last()):false));s.uri=o?p.split("?").first()+"?"+o:p;this.el=d.monitoredNode(q.tag||"script",{type:q.contentType||"text/javascript",src:s.uri,charset:q.charset||m.charset||null},{success:function(){this.status=!!this.responseText?200:504;this.abort()},failure:function(){this.status=404;this.abort()},scope:s.conn},q.target,true);this._headers["content-type"]=this.el.dom.type;this.readyState=1;Ext.isFunction(this.onreadystatechange)&&this.onreadystatechange()};m.async=true}else{s=this.createXhrObject(t,m)}if(s){this.transactionId++}}catch(n){s&&(s.status.isError=!!(s.status.error=n))}finally{return s}},makeRequest:function(v,q,u,m,n){var t;if(t=this.getConnectionObject(q,n,m)){t.options=n;var p=t.conn;try{if(t.status.isError){throw t.status.error}d.activeRequests++;p.open(v.toUpperCase(),q,n.async,n.userId,n.password);("onreadystatechange" in p)&&(p.onreadystatechange=this.onStateChange.createDelegate(this,[t,u,"readystate"],0));("onload" in p)&&(p.onload=this.onStateChange.createDelegate(this,[t,u,"load",4],0));("onprogress" in p)&&(p.onprogress=this.onStateChange.createDelegate(this,[t,u,"progress"],0));if(!this.events||this.fireEvent("beforesend",t,v,q,u,m,n)!==false){if(u&&u.timeout&&n.async){(n.async)&&("timeout" in p)&&(p.timeout=u.timeout);("ontimeout" in p)&&(p.ontimeout=this.abort.createDelegate(this,[t,u,true],0));("ontimeout" in p)||(n.async&&(this.timeout[t.tId]=window.setInterval(function(){d.abort(t,u,true)},u.timeout)))}if(this.useDefaultXhrHeader&&!n.xdomain){this.defaultHeaders["X-Requested-With"]||this.initHeader("X-Requested-With",this.defaultXhrHeader,true)}this.setHeaders(t);this.conn[t.tId]=t;p.send(m||null)}else{this.releaseObject(t);return t}}catch(s){t.status.isError=true;t.status.error=s}if(t.status.isError){return Ext.apply(t,this.handleTransactionResponse(t,u))}n.async||this.onStateChange(t,u,"load");return t}},abort:function(n,p,m){if(n){n.status||(n.status={});Ext.apply(n.status,{isAbort:!!!m,isTimeout:!!m,isError:!!m||!!n.status.isError});if(n.queued&&n.request){n.request.active=n.queued=false;this.events&&this.fireEvent("abort",n,p);return true}else{if(this.isCallInProgress(n)){if(!this.events||this.fireEvent(m?"timeout":"abort",n,p)!==false){("abort" in n.conn)&&n.conn.abort();this.handleTransactionResponse(n,p,n.status.isAbort,n.status.isTimeout)}return true}}}return false},isCallInProgress:function(m){if(m&&m.conn){if("readyState" in m.conn&&{0:true,4:true}[m.conn.readyState]){return false}return true}return false},clearAuthenticationCache:function(m){try{if(Ext.isIE){document.execCommand("ClearAuthenticationCache")}else{var n;if(n=new XMLHttpRequest()){n.open("GET",m||"/@@",true,"logout","logout");n.send("");n.abort.defer(100,n)}}}catch(o){}},initHeader:function(m,n){(this.headers=this.headers||{})[m]=n},onStateChange:function(t,A,y){if(!t.conn||t.status.isTimeout||t.status.isError){return}var n=t.conn,w=("readyState" in n?n.readyState:0);if(y==="load"||w>2){var z;try{z=n.contentType||n.getResponseHeader("Content-Type")||""}catch(u){}if(z&&/multipart\//i.test(z)){var m=null,s=z.split('"')[1],x="--"+s;t.multiPart=true;try{m=n.responseText}catch(v){}var q=m?m.split(x):null;if(q){t.parts||(t.parts=[]);q.shift();q.pop();forEach(Array.slice(q,t.parts.length),function(o){var r=o.split("\n\n");var p=(r[0]?r[0]:"")+"\n";t.parts.push(this.handleTransactionResponse(Ext.apply(Ext.clone(t),{boundary:s,conn:{status:200,responseText:(r[1]||"").trim(),getAllResponseHeaders:function(){return p.split("\n").filter(function(B){return !!B}).join("\n")}},isPart:true}),A))},this)}}}(w===4||y==="load")&&d.handleTransactionResponse(t,A);this.events&&this.fireEvent.apply(this,["readystatechange"].concat(Array.slice(arguments,0)))},setHeaders:function(m){if(m.conn&&"setRequestHeader" in m.conn){this.defaultHeaders&&forEach(this.defaultHeaders,function(o,n){m.conn.setRequestHeader(n,o)});this.headers&&forEach(this.headers,function(o,n){m.conn.setRequestHeader(n,o)})}this.headers={};this.hasHeaders=false},resetDefaultHeaders:function(){delete this.defaultHeaders;this.defaultHeaders={};this.hasDefaultHeaders=false},activeXMultipart:["MSXML2.XMLHTTP.6.0","MSXML3.XMLHTTP"],activeX:["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]});if(Ext.util.Observable){Ext.apply(d,{events:{request:true,beforesend:true,response:true,exception:true,abort:true,timeout:true,readystatechange:true,beforequeue:true,queue:true,queueempty:true},onStatus:function(m,q,p,o){var n=Array.slice(arguments,1);m=new Array().concat(m||new Array());forEach(m,function(r){r=parseInt(r,10);if(!isNaN(r)){var s="status:"+r;this.events[s]||(this.events[s]=true);this.on.apply(this,[s].concat(n))}},this)},unStatus:function(m,q,p,o){var n=Array.slice(arguments,1);m=new Array().concat(m||new Array());forEach(m,function(r){r=parseInt(r,10);if(!isNaN(r)){var s="status:"+r;this.un.apply(this,[s].concat(n))}},this)}},new Ext.util.Observable());Ext.hasBasex=true}Ext.stopIteration={stopIter:true};Ext.applyIf(Array.prototype,{map:function(n,q){var m=this.length;if(typeof n!="function"){throw new TypeError()}var p=new Array(m);for(var o=0;o<m;++o){o in this&&(p[o]=n.call(q||this,this[o],o,this))}return p},some:function(o){var p=Ext.isFunction(o)?o:function(){};var n=0,m=this.length,q=false;while(n<m&&!(q=!!p(this[n++]))){}return q},every:function(o){var p=Ext.isFunction(o)?o:function(){};var n=0,m=this.length,q=true;while(n<m&&(q=!!p(this[n++]))){}return q},include:function(p,n){if(!n&&typeof this.indexOf=="function"){return this.indexOf(p)!=-1}var o=false;try{this.forEach(function(r,q){if(o=(n?(r.include?r.include(p,n):(r===p)):r===p)){throw Ext.stopIteration}})}catch(m){if(m!=Ext.stopIteration){throw m}}return o},filter:function(o,n){var m=new Array();o||(o=function(p){return p});this.forEach(function(q,p){o.call(n,q,p)&&m.push(q)});return m},compact:function(n){var m=new Array();this.forEach(function(o,p){(o===null||o===undefined)||!(p in this)||m.push(n&&Ext.isArray(o)?o.compact():o)},this);return m},flatten:function(){var m=new Array();this.forEach(function(n){Ext.isArray(n)?(m=m.concat(n)):m.push(n)},this);return m},indexOf:function(p){for(var n=0,m=this.length;n<m;++n){if(this[n]==p){return n}}return -1},lastIndexOf:function(n){var m=this.length-1;while(m>-1&&this[m]!=n){m--}return m},unique:function(n,o){var m=new Array();this.forEach(function(q,p){if(0==p||(n?m.last()!=q:!m.include(q,o))){m.push(q)}},this);return m},grep:function(q,p,o){var m=new Array();p||(p=function(r){return r});var n=o?p.createDelegate(o):p;if(typeof q=="string"){q=new RegExp(q)}q instanceof RegExp&&this.forEach(function(s,r){q.test(s)&&m.push(n(s,r))});return m},first:function(o){var n=0;if(o){var m=this.length;while(n<m&&!(n in this)){n++}}return this[n]},last:function(n){var m=this.length-1;if(n){while(m>0&&!(m in this)){m--}}return this[m]},clear:function(){this.length=0},atRandom:function(n){var m=Math.floor(Math.random()*this.length);return this[m]||n},clone:function(m){if(!m){return this.concat()}var o=this.length||0,n=new Array(o);while(o--){n[o]=Ext.clone(this[o],true)}return n},reduce:function(r,m){var n=this.length,o=0,p,q;if(!n){return m||null}p=m||this.first(true);this.forEach(function(u,t,s){q=u;p=r.apply(null,[p,q,t,s])});return p},forEach:function(n,m){Array.forEach(this,n,m)},reversed:function(){var n=this.length||0,m=[];while(n--){m.push(this[n])}return m}});window.forEach=function(n,q,o,m){o=o||n;if(n){if(typeof q!="function"){throw new TypeError()}var p=Object;if(n instanceof Function){p=Function}else{if(n.forEach instanceof Function){return n.forEach(q,o)}else{if(typeof n=="string"){p=String}else{if(typeof n.length=="number"){p=Array}}}}return p.forEach(n,q,o,m)}};Ext.clone=function(n,m){if(n===null||n===undefined){return n}if(Ext.isFunction(n.clone)){return n.clone(m)}else{if(Ext.isFunction(n.cloneNode)){return n.cloneNode(m)}}var p={};forEach(n,function(q,o,r){p[o]=(q===r?p:m?Ext.clone(q,true):q)},n,m);return p};var k=Array.prototype.slice;var c=Array.prototype.filter;Ext.applyIf(Array,{slice:function(m){return k.apply(m,k.call(arguments,1))},filter:function(o,n){var m=o&&typeof o=="string"?o.split(""):[];return c.call(m,n)},forEach:function(q,p,o){if(typeof p!="function"){throw new TypeError()}for(var n=0,m=q.length>>>0;n<m;++n){(n in q)&&p.call(o||null,q[n],n,q)}}});Ext.applyIf(RegExp.prototype,{clone:function(){return new RegExp(this)}});Ext.applyIf(Date.prototype,{clone:function(m){return m?new Date(this.getTime()):this}});Ext.applyIf(Boolean.prototype,{clone:function(){return this===true}});Ext.applyIf(Number.prototype,{times:function(p,n){var o=parseInt(this,10)||0;for(var m=1;m<=o;){p.call(n,m++)}},forEach:function(){this.times.apply(this,arguments)},clone:function(){return(this)+0}});Ext.applyIf(String.prototype,{trim:function(){var m=/^\s+|\s+$/g;return function(){return this.replace(m,"")}}(),trimRight:function(){var m=/^|\s+$/g;return function(){return this.replace(m,"")}}(),trimLeft:function(){var m=/^\s+|$/g;return function(){return this.replace(m,"")}}(),clone:function(){return String(this)+""},forEach:function(n,m){String.forEach(this,n,m)}});var b=function(r,p){var q=typeof r=="function"?r:function(){};var o=q._ovl;if(!o){o={base:q};o[q.length||0]=q;q=function(){var u=arguments.callee._ovl,t=u[arguments.length]||u.base;return t&&t!=arguments.callee?t.apply(this,arguments):undefined}}var s=[].concat(p);for(var n=0,m=s.length;n<m;++n){o[s[n].length]=s[n]}q._ovl=o;return q};var e={array:"[object Array]",object:"[object Object]",complex:/object|array/i},l=/^(function|object)$/i,g=/^(number|string|boolean)$/i;Ext.applyIf(Ext,{isHostMethod:function(m,o){var n=typeof m[o];return !!((l.test(n)&&m[o])||n=="unknown")},isHostObjectProperty:function(m,o){var n=typeof m[o];return !!((l.test(n)&&m[o]))},overload:b(b,[function(m){return b(null,m)},function(o,n,m){return o[n]=b(o[n],m)}]),isIterable:function(m){if(Ext.isArray(m)||m.callee){return true}if(/NodeList|HTMLCollection/.test(a.toString.call(m))){return true}return(typeof m.nextNode!="undefined"||m.item)&&Ext.isNumber(m.length)},isArray:function(m){return m instanceof Array},isObject:function(m){return !!m&&a.toString.call(m)=="[object Object]"},isComplex:function(m){return !!m&&e.complex.test(typeof m)},isDocument:function(m){return a.toString.apply(m)=="[object HTMLDocument]"||(m&&m.nodeType===9)},isElement:function(m){if(m){var n=m.dom||m;return !!n.tagName||(/\[object html/i).test(a.toString.apply(n))}return false},isEvent:function(m){return a.toString.apply(m)=="[object Event]"||(Ext.isObject(m)&&!Ext.type(m.constructor)&&(window.event&&m.clientX&&m.clientX===window.event.clientX))},isFunction:function(m){return typeof m=="function"},isPrimitive:function(m){return g.test(typeof m)},isDefined:h});var f=Ext.capabilities=Ext.supports||{};f.isEventSupported=function(){var o={select:"input",change:"input",submit:"form",reset:"form",load:"img",error:"img",abort:"img"};var m={},p=/^on/i,n=function(s,r){var q=Ext.getDom(r);return(q?(Ext.isElement(q)||Ext.isDocument(q)?q.nodeName.toLowerCase():r.self?"#window":r||"#object"):r||"div")+":"+s};return function(u,w){u=(u||"").replace(p,"");var v,t=false,r="on"+u,q=(w?w:o[u])||"div",s=n(u,q);if(s in m){return m[s]}v=Ext.isString(q)?document.createElement(q):w;t||(t=window.Event&&!!(String(u).toUpperCase() in window.Event));if(!t&&v&&Ext.isHostMethod(v,"setAttribute")){t=true;if(typeof v[r]=="undefined"){v.setAttribute(r,"return;");t=Ext.isHostMethod(v,r)}}m[s]=t;v=null;return t}}();Ext.onReady(function(){var m=document.createElement("input");Ext.applyIf(f,{hasActiveX:h(window.ActiveXObject),hasXDR:function(){return h(window.XDomainRequest)||(h(window.XMLHttpRequest)&&"withCredentials" in new XMLHttpRequest())}(),hasChromeFrame:function(){try{if(h(window.ActiveXObject)&&!!(new ActiveXObject("ChromeTab.ChromeFrame"))){return true}}catch(n){}var o=navigator.userAgent.toLowerCase();return !!(o.indexOf("chromeframe")>=0||o.indexOf("x-clock")>=0)}(),hasFlash:(function(){if(h(window.ActiveXObject)){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return true}catch(q){}return false}else{if(navigator.plugins){for(var n=0,p=navigator.plugins,o=p.length;n<o;++n){if((/flash/i).test(p[n].name)){return true}}return false}}return false})(),hasCookies:Ext.isIE&&("dialogArguments" in window)?false:!!navigator.cookieEnabled,hasCanvas:!!document.createElement("canvas").getContext,hasCanvasText:function(){return !!(this.hasCanvas&&typeof document.createElement("canvas").getContext("2d").fillText=="function")}(),hasSVG:!!(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").width),hasXpath:!!document.evaluate,hasWorkers:h(window.Worker)||f.hasGears,hasOffline:j(h,null,window,"applicationCache")||false,hasLocalStorage:j(h,null,window,"localStorage")||false,hasDeviceAcceleration:h(window.DeviceMotionEvent),hasGeoLocation:h(navigator.geolocation),hasBasex:true,hasMicrodata:!!document.getItems,hasAudio:function(){var p=!!document.createElement("audio").canPlayType,q=("Audio" in window&&window.Audio)?new Audio(""):{},r=p||("canPlayType" in q)?{tag:p,object:("play" in q),testMime:function(t){var u;return(u=q.canPlayType?q.canPlayType(t):"no")!=="no"&&u!==""}}:false,s,o,n={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/x-wav",basic:"audio/basic",aif:"audio/x-aiff"};if(r&&r.testMime){for(o in n){r[o]=r.testMime(n[o])}}return r}(),hasVideo:function(){var p=!!document.createElement("video").canPlayType,r=p?document.createElement("video"):{},q=("canPlayType" in r)?{tag:p,testCodec:function(t){var u;return(u=r.canPlayType?r.canPlayType(t):"no")!=="no"&&u!==""}}:false,s,n,o={mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',ogg:'video/ogg; codecs="theora, vorbis"'};if(q&&q.testCodec){for(n in o){q[n]=q.testCodec(o[n])}}return q}(),hasInput:{autoFocus:"autofocus" in m,placeholder:"placeholder" in m},hasInputs:function(){var n={};Ext.each(["search","number","range","color","tel","url","email","date","month","week","time","datetime","datetime-local"],function(o){try{m.setAttribute("type",o)}catch(p){}finally{n[o]=m.type!="text"}});return n}()});m=null});Ext.EventManager.on(window,"beforeunload",d.onUnload,d,{single:true})})();Ext.applyIf(Function.prototype,{forEach:function(a,e,d,c){if(a){var b;for(b in a){(!!c||a.hasOwnProperty(b))&&e.call(d||a,a[b],b,a)}}},createBuffered:function(a,c){var d=this,b=new Ext.util.DelayedTask();return function(){b.delay(a,d,c,Array.slice(arguments,0))}},createDelayed:function(c,d,b,a){var e=(d||b)?this.createDelegate(d,b,a):this;return c?function(){setTimeout(e,c)}:e},clone:function(a){return this}});
